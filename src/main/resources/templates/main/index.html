<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8" />
	<title>Cleanex - Home Cleaning Service</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta content="Cleanex - Home Cleaning Service" name="keywords" />
	<meta content="Cleanex - Home Cleaning Service" name="description" />

	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;400&display=swap" rel="stylesheet" />
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet" />

	<link href="../front/img/favicon.ico" rel="icon" />
	<link href="../front/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet" />
	<link href="../front/lib/lightbox/css/lightbox.min.css" rel="stylesheet" />
	<link href="../front/css/style.css" rel="stylesheet" />
	<style>
		#bookingModal {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5);
			display: flex;
			justify-content: center;
			align-items: center;
			z-index: 9999;
		}


		.modal-content {
			background: white;
			padding: 20px;
			border-radius: 8px;
			text-align: center;
			width: 50vw;
			z-index: 10000;
			position: relative;
		}

		.notification {
			position: fixed;
			top: 20px;
			right: 20px;
			padding: 15px;
			border-radius: 4px;
			color: white;
			font-weight: bold;
			z-index: 9999;
		}

		.success {
			background-color: #4CAF50;
			z-index: 10000;
		}

		.error {
			background-color: #f44336;
			z-index: 10000;
		}

		body.no-scroll {
			overflow: hidden !important;
		}
	</style>
</head>

<body>
	<div id="preloader">
		<div class="spinner"></div>
	</div>

	<!-- Header -->
	<div class="header home">
		<div class="container-fluid">
			<div class="header-top row align-items-center">
				<div class="col-lg-3">
					<div class="brand">
						<a th:href="@{/}">Cleanex</a>
					</div>
				</div>
				<div class="col-lg-9">
					<div class="topbar">
						<div class="topbar-col">
							<a href="tel:+012 345 67890"><i class="fa fa-phone-alt"></i>+012 345 67890</a>
						</div>
						<div class="topbar-col">
							<a href="mailto:cleanex@gmail.com"><i class="fa fa-envelope"></i>cleanex@gmail.com</a>
						</div>
					</div>
					<div class="navbar navbar-expand-lg bg-light navbar-light">
						<a href="#" class="navbar-brand">MENU</a>
						<button type="button" class="navbar-toggler" data-toggle="collapse"
							data-target="#navbarCollapse">
							<span class="navbar-toggler-icon"></span>
						</button>

						<div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
							<div class="navbar-nav ml-auto">
								<a th:href="@{/}" class="nav-item nav-link active">Home</a>
								<a th:href="@{/service}" class="nav-item nav-link">Service</a>
								<a th:href="@{/blog}" class="nav-item nav-link">Blog</a>
								<a th:href="@{/about}" class="nav-item nav-link">About</a>
								<a th:href="@{/contact}" class="nav-item nav-link">Contact</a>

								<a th:if="${session.usrId == null}" th:href="@{/user/login}" class="nav-item nav-link">
									Login
								</a>
								<a th:if="${session.usrId != null}" th:href="@{/user/orders}" class="nav-item nav-link">
									Order <span class="badge badge-light">2</span>
								</a>
								<a th:if="${session.usrId != null}" th:href="@{/user/accounts}"
									class="nav-item nav-link">
									Your Account
								</a>
								<a th:if="${session.usrId != null}" th:href="@{/user/logout}" class="nav-item nav-link">
									Logout
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="hero">
			<div class="container">
				<div class="row align-items-center justify-content-start py-5">
					<div class="col-12">
						<h2>Best & Trusted</h2>
						<h2>
							<span>Cleaning</span>
							<span class="align-items-center">Service</span>
						</h2>
						<p class="align-items-center">At least 1 Year Experience Employees will clean your home!</p>
						<a class="btn" href="#PlanningPrice">Plan the price now!</a>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Sections -->
	<div class="wrapper">

		<!-- About -->
		<div class="about">
			<div class="container">
				<div class="section-header">
					<p>Our Staffs</p>
					<h2>Experience Matter</h2>
				</div>
				<div class="row">
					<div class="col-lg-5 col-md-6">
						<div class="about-img">
							<img loading="lazy" src="../front/img/about.jpg" alt="Image">
						</div>
					</div>
					<div class="col-lg-7 col-md-6">
						<div class="about-text">
							<h2><span>1</span> year of experience least</h2>
							<p>We are dedicated to providing top-notch cleaning services, backed by over a decade of
								experience. Our team is equipped with the best tools and methods to ensure your
								space
								shines every time.</p>
							<p>With a focus on reliability, efficiency, and customer satisfaction, we aim to exceed
								expectations with every cleaning. Whether it's residential or commercial spaces, our
								expert cleaners are here to transform your environment.</p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Service -->
		<div class="service">
			<div class="container">
				<div class="section-header">
					<p>Our Services</p>
					<h2>Commit to Making Your Home Fresher</h2>
				</div>
				<div class="row">
					<div class="col-lg-3 col-md-6 pb-4" th:each="item : ${services}"
						th:if="${item.status != 'disabled'}">
						<div class="service-item">
							<img th:if="${item.image != null}" th:src="'/upload/'+${item.image}"
								style="width: 16rem; height: 16rem; object-fit: cover;" />
							<img th:unless="${item.image != null}" th:src="'../../front/img/none-img.png'"
								style="width: 16rem; height: 16rem; object-fit: cover;" />
							<h3 th:text="${item.serName}"></h3>
							<p>Price: <span th:text="${item.basePrice} + '$'"></span></p>
							<p th:text="${item.description}"></p>
							<a class="btn justify-content-end" href="javascript:void(0);"
								onclick="showBookingPopup(event)"
								th:attr="serId=${item.id}, userId=${session.usrId}">Book Now</a>
						</div>
					</div>
					<!-- Message when no services are available -->
					<p th:unless="${services != null}" class="col-12 mb-5">
						We are re-organizing our services to better meet your house cleaning demands.
					</p>
				</div>
			</div>
		</div>
		<!-- Popup Modal -->
		<div id="bookingModal" style="display: none;">
			<div class="modal-content">
				<h3>Select Service Date</h3>
				<input class="form-control my-4" type="date" id="serviceDate" required />
				<div class="d-flex justify-content-between">
					<button class="btn btn-success" onclick="confirmBooking()">Confirm Booking</button>
					<button class="btn btn-secondary" onclick="closePopup()">Cancel</button>
				</div>
			</div>
		</div>

		<!-- Feature -->
		<div class="feature">
			<div class="container">
				<div class="row">
					<div class="col-md-5">
						<div class="section-header left">
							<p>Why Choose Us</p>
							<h2>Professional Cleaners provide Distinguished Services</h2>
						</div>
						<p>
							We are more than just a cleaning company. Our attention to detail, commitment to quality,
							and customer-first approach make us the top choice for residential and commercial cleaning
							services
						</p>
						<a class="btn" th:href="@{/about}">Learn More</a>
					</div>
					<div class="col-md-7">
						<div class="row align-items-center feature-item">
							<div class="col-5">
								<img loading="lazy" src="../front/img/feature-1.jpg" alt="Feature">
							</div>
							<div class="col-7">
								<h3>Expert Staffs</h3>
								<p>
									Our team is made up of highly trained professionals who are dedicated to
									delivering exceptional results.
								</p>
							</div>
						</div>
						<div class="row align-items-center feature-item">
							<div class="col-5">
								<img loading="lazy" src="../front/img/feature-2.jpg" alt="Feature">
							</div>
							<div class="col-7">
								<h3>Eco-Friendly Cleaning</h3>
								<p>
									We prioritize using green cleaning products that are safe for both your family
									and the environment.
								</p>
							</div>
						</div>
						<div class="row align-items-center feature-item">
							<div class="col-5">
								<img loading="lazy" src="../front/img/feature-3.jpg" alt="Feature">
							</div>
							<div class="col-7">
								<h3>Flexible Scheduling</h3>
								<p>
									We work around your schedule to ensure minimal disruption, offering convenient
									booking options and flexible hours.
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Team -->
		<div class="team">
			<div class="container">
				<div class="section-header">
					<p>Team Member</p>
					<h2>Meet Our Expert Cleaners</h2>
				</div>
				<div class="row">
					<div class="col-lg-3 col-md-6">
						<div class="team-item">
							<div class="team-img">
								<img loading="lazy" src="../front/img/team-1.jpg" alt="Team Image">
							</div>
							<div class="team-text">
								<h2>Josh Dunn</h2>
								<h3>Founder & CEO</h3>
								<p>Josh has over 15 years of experience in the cleaning industry and leads the
									company
									with a commitment to excellence and customer satisfaction.</p>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6">
						<div class="team-item">
							<div class="team-img">
								<img loading="lazy" src="../front/img/team-2.jpg" alt="Team Image">
							</div>
							<div class="team-text">
								<h2>Mollie Ross</h2>
								<h3>Operations Manager</h3>
								<p>Mollie ensures that every job runs smoothly, coordinating teams and managing
									client
									relations to deliver seamless service.</p>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6">
						<div class="team-item">
							<div class="team-img">
								<img loading="lazy" src="../front/img/team-3.jpg" alt="Team Image">
							</div>
							<div class="team-text">
								<h2>Dylan Adams</h2>
								<h3>Lead Cleaner</h3>
								<p>Dylan is an expert in deep cleaning and stain removal, specializing in carpets
									and
									upholstery for residential and commercial clients.</p>
							</div>
						</div>
					</div>
					<div class="col-lg-3 col-md-6">
						<div class="team-item">
							<div class="team-img">
								<img loading="lazy" src="../front/img/team-4.jpg" alt="Team Image">
							</div>
							<div class="team-text">
								<h2>Jennifer Page</h2>
								<h3>Sanitation Specialist</h3>
								<p>Jennifer focuses on ensuring hygienic, spotless environments, paying close
									attention
									to every detail, especially in bathrooms and kitchens.</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- FAQs -->
		<div class="faqs" id="FAQ">
			<div class="container">
				<div class="row">
					<div class="col-md-5">
						<div class="section-header left">
							<p>You Might Ask</p>
							<h2>Frequently Asked Questions</h2>
						</div>
						<img loading="lazy" src="../front/img/faqs.jpg" alt="Image">
					</div>
					<div class="col-md-7">
						<div id="accordion">
							<div class="card">
								<div class="card-header">
									<a class="card-link collapsed" data-toggle="collapse" href="#collapseOne"
										aria-expanded="true">
										<span>1</span> What areas do you serve?
									</a>
								</div>
								<div id="collapseOne" class="collapse show" data-parent="#accordion">
									<div class="card-body">
										We provide services across the city and its surrounding suburbs. Contact us
										to
										see if we cover your location.
									</div>
								</div>
							</div>
							<div class="card">
								<div class="card-header">
									<a class="card-link" data-toggle="collapse" href="#collapseTwo">
										<span>2</span> Do you use eco-friendly products?
									</a>
								</div>
								<div id="collapseTwo" class="collapse" data-parent="#accordion">
									<div class="card-body">
										Yes, we prioritize the use of eco-friendly and non-toxic products to ensure
										the
										safety of our clients and the environment.
									</div>
								</div>
							</div>
							<div class="card">
								<div class="card-header">
									<a class="card-link" data-toggle="collapse" href="#collapseThree">
										<span>3</span> How do I book a service?
									</a>
								</div>
								<div id="collapseThree" class="collapse" data-parent="#accordion">
									<div class="card-body">
										You can book a service by calling us, visiting our website, or filling out
										the
										form online. We offer flexible scheduling to suit your needs.
									</div>
								</div>
							</div>
						</div>
						<a class="btn" href="">Ask more</a>
					</div>
				</div>
			</div>
		</div>

		<!-- Pricing Plan -->
		<div class="price" id="PlanningPrice">
			<div class="container">
				<div class="section-header">
					<p>For your convenience, we offer three packages that are suited to our usual clients needs.</p>
					<h2>Pricing Plan Reference</h2>
				</div>
				<div class="row">
					<div class="col-md-4">
						<div class="price-item">
							<div class="price-header">
								<div class="price-icon">
									<i class="fa fa-home"></i>
								</div>
								<div class="price-title">
									<h2>Basic Clean</h2>
								</div>
								<div class="price-pricing">
									<h2><small>$</small>49</h2>
								</div>
							</div>
							<div class="price-body">
								<div class="price-des">
									<ul>
										<li>Basic Bathroom & Kitchen Cleaning</li>
										<li>Vacuuming & Dusting</li>
										<li>Surface Wipe-Down</li>
										<li>Floor Cleaning</li>
										<li>Complete Within 4 hours</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="price-item featured-item">
							<div class="price-header">
								<div class="price-icon">
									<i class="fa fa-star"></i>
								</div>
								<div class="price-title">
									<h2>Deep Clean</h2>
								</div>
								<div class="price-pricing">
									<h2><small>$</small>79</h2>
								</div>
							</div>
							<div class="price-body">
								<div class="price-des">
									<ul>
										<li>Bathroom & Kitchen Sanitization</li>
										<li>Carpet & Upholstery Cleaning</li>
										<li>Complete Room Cleaning</li>
										<li>Window & Glass Polishing</li>
										<li>Complete Within 6 hours</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					<div class="col-md-4">
						<div class="price-item">
							<div class="price-header">
								<div class="price-icon">
									<i class="fa fa-gift"></i>
								</div>
								<div class="price-title">
									<h2>Ultimate Clean</h2>
								</div>
								<div class="price-pricing">
									<h2><small>$</small>129</h2>
								</div>
							</div>
							<div class="price-body">
								<div class="price-des">
									<ul>
										<li>Exterior Cleaning (Windows, Porch, etc.)</li>
										<li>Special Requests (Pets, Allergies)</li>
										<li>Customized Cleaning Plan</li>
										<li>All Deep Clean Services</li>
										<li>Complete Within 12 Hours</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Footer -->
	<div th:replace="~{main/fragments/footer::mainFooter}"></div>

	<!-- BACK TO TOP -->
	<a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
	<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
	<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>

	<script src="../front/lib/easing/easing.min.js"></script>
	<script src="../front/lib/owlcarousel/owl.carousel.min.js"></script>
	<script src="../front/lib/isotope/isotope.pkgd.min.js"></script>
	<script src="../front/lib/lightbox/js/lightbox.min.js"></script>
	<script src="../front/js/main.js"></script>
	<script>
		let selectedServiceId = null;
		let UserId = null;
		const inputDate = document.getElementById("serviceDate");
		const currentYear = new Date().getFullYear();
		inputDate.max = `${currentYear + 2}-12-31`;

		function showBookingPopup(event) {
			var item = event.target
			selectedServiceId = item.getAttribute("serId");
			UserId = item.getAttribute("userId");
			document.getElementById("bookingModal").style.display = "flex";
			document.body.classList.add("no-scroll");
		}

		function closePopup() {
			document.getElementById("bookingModal").style.display = "none";
			document.body.classList.remove("no-scroll");
		}

		function confirmBooking() {
			const date = document.getElementById("serviceDate").value;

			if (!date) {
				alert("Please select a date.");
				return;
			}

			if (UserId == null) {
				window.location.href = '/user/login';
			}

			$.ajax({
				url: '/user/bookService',
				type: 'POST',
				data: {
					userId: UserId,
					serviceId: selectedServiceId,
					startDate: date
				},
				success: function (response, textStatus, xhr) {
					if (xhr.status === 200) {
						showNotification(response, "success");
						closePopup();
					} else {
						showNotification("Failed to create order: " + response, "error");
					}
				},
				error: function (xhr) {
					if (xhr.status === 409) {
						showNotification("Service is already booked.", "warning");
					} else {
						console.error('Error:', xhr.responseText);
						showNotification("Error: " + xhr.responseText, "error");
					}
				}
			});
		}
		function showNotification(message, type) {
			var notification = $('<div class="notification ' + type + '">' + message + '</div>');
			$('body').append(notification);
			notification.fadeIn('slow').delay(3000).fadeOut('slow', function () {
				$(this).remove();
			});
		}
	</script>
</body>

</html>